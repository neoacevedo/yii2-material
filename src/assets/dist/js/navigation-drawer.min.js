/**
 * @copyright neoacevedo, 2025
 * @subpackage yii2-material
 * 
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
class NavigationDrawer extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this._isOpen=!1,this._type=this.getAttribute("type")||"modal"}static get styles(){return'\n      :host {\n        display: flex;\n        flex-direction: column;\n        top: 0;\n        left: 0;\n        height: 100vh;\n        background-color: var(--md-sys-color-surface);\n        box-shadow: var(--md-sys-elevation-level3, 0px 1px 3px 0px rgba(0, 0, 0, 0.12), 0px 2px 6px 2px rgba(0, 0, 0, 0.06));\n        z-index: 10;\n        transition: transform 0.3s ease-in-out;\n        padding-left: 1rem;\n        padding-right: 1rem;\n      }\n\n      /* Estilos comunes a ambos modos */\n      .drawer {\n        width: 320px;\n      }\n\n      .drawer-list {\n        list-style: none;\n        padding: 0;\n        margin: 0;\n        flex-grow: 1;\n      }\n\n      ::slotted(md-list-item) {\n        border-radius: var(--md-sys-shape-corner-full);\n      }\n\n      /* Estilos específicos para el modo modal */\n      :host([mode="modal"]) {\n        width: 300px; /* Ancho típico para modal */\n        transform: translateX(-100%);\n      }\n\n      :host([mode="modal"].open) {\n        transform: translateX(0);\n      }\n\n      .scrim {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.5);\n        opacity: 0;\n        visibility: hidden;\n        transition: opacity 0.3s ease-in-out, visibility 0s 0.3s;\n        z-index: 9; /* Debajo del drawer modal */\n      }\n\n      :host([mode="modal"].open) + .scrim {\n        opacity: 1;\n        visibility: visible;\n        transition: opacity 0.3s ease-in-out, visibility 0s 0s;\n      }\n\n      /* Estilos específicos para el modo estándar */\n      :host([mode="standard"]) {\n        width: 240px; /* Ancho típico para estándar */\n        transform: translateX(0); /* Siempre visible */\n        border-right: 1px solid var(--md-sys-color-outline);\n      }\n\n      :host([mode="standard"]) .drawer-header {\n        border-bottom: none; /* Opcional: quitar el borde inferior en modo estándar */\n      }\n    '}connectedCallback(){this._type=this.getAttribute("type")||"modal",this.shadowRoot.innerHTML=`\n      <style>${NavigationDrawer.styles}</style>\n      <div class="drawer">\n        <div class="drawer-list">\n          <slot name="content"></slot>\n        </div>\n      </div>\n      ${"modal"===this._type?'<div class="scrim"></div>':""}\n    `,this._drawerElement=this.shadowRoot.querySelector(".drawer"),"modal"===this._type&&(this._scrimElement=this.shadowRoot.querySelector(".scrim"),this._scrimElement.addEventListener("click",this._closeDrawer.bind(this)));const e=this.shadowRoot.querySelector("slot[name=content]");e&&e.addEventListener("slotchange",(()=>{e.assignedNodes().forEach((e=>{if(8!==e.nodeType&&(3!==e.nodeType||/\S/.test(e.nodeValue))&&e.classList.contains("navigation-drawer-content")){e.querySelectorAll(".drawer-list-item").forEach((e=>{e&&(e.style="\n                  border-radius: var(--md-sys-shape-corner-full);\n                ",e.hasAttribute("selected")&&(e.style="\n                    border-radius: var(--md-sys-shape-corner-full);\n                    background-color: rgba(var(--md-sys-color-secondary-container), 0.16);\n                    color: var(--md-sys-color-primary);\n                  "))}))}}))}))}disconnectedCallback(){"modal"===this._type&&this._scrimElement&&this._scrimElement.removeEventListener("click",this._closeDrawer.bind(this))}static get observedAttributes(){return["mode"]}attributeChangedCallback(e,t,n){"mode"===e&&t!==n&&(this._type=n,this.connectedCallback())}open(){if("modal"===this._type){this._isOpen=!0,this.classList.add("open");const e=this.shadowRoot.querySelector(".scrim");e&&e.classList.add("open"),document.body.style.overflow="hidden"}else"standard"===this._type&&console.warn("El método 'open()' no tiene efecto en el modo 'standard'.")}close(){if("modal"===this._type){this._isOpen=!1,this.classList.remove("open");const e=this.shadowRoot.querySelector(".scrim");e&&e.classList.remove("open"),document.body.style.overflow=""}else"standard"===this._type&&console.warn("El método 'close()' no tiene efecto en el modo 'standard'.")}_closeDrawer(){this.close()}toggle(){"modal"===this._type?this._isOpen?this.close():this.open():"standard"===this._type&&console.warn("El método 'toggle()' no tiene efecto en el modo 'standard'.")}}customElements.define("md-navigation-drawer",NavigationDrawer);